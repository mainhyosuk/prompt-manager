# Changelog

All notable changes to this project will be documented in this file.

## [v1.361] - 2025-04-08

### Added
- 프롬프트 카드 상세 UI에 메모 기능 추가
  - 프롬프트별 메모 작성 및 저장 기능 구현
  - 자동 저장 기능으로 입력 중단 1초 후 자동 저장
  - 모달 종료 시 메모 내용 자동 저장

### Improved
- 프롬프트 카드 상세 UI 개선
  - 원본 프롬프트와 변수 적용된 프롬프트 영역의 스타일 일관성 강화
  - 두 영역의 높이와 정렬을 일치시켜 시각적 통일성 확보
  - 스크롤 처리 방식 최적화로 사용성 향상
  - 메모 영역을 상단으로 이동하여 접근성 향상

### Fixed
- 프롬프트 모달 UI 오류 수정
  - 중첩된 스크롤 영역으로 인한 렌더링 문제 해결
  - 레이아웃 정렬 및 높이 불일치 문제 해결
  - 변수가 적용된 프롬프트 영역 내용 잘림 현상 수정

## [v1.360] - 2025-04-07

### Improved
- 프롬프트 편집창에서 드롭다운 오류 개선
  - 폴더 선택 드롭다운의 z-index 값 조정으로 태그 컴포넌트에 가려지는 문제 해결
  - 태그 선택 시 발생하는 마우스 이벤트 오류 수정

### Added
- 프롬프트 사용창에서 변수 기본값 저장 기능 추가
  - 변수 입력창 옆에 저장 아이콘 추가로 입력한 값을 기본값으로 저장 가능
  - 변수 저장 상태에 따른 시각적 피드백 (저장 중, 저장 완료, 오류) 제공
  - 텍스트 에디터에서도 기본값으로 저장 기능 지원
  - 저장된 변수 값이 프롬프트 편집창의 '기본값 (선택사항)' 필드와 자동 연동

### Fixed
- 데이터베이스 및 UI 관련 오류 수정
  - 변수 기본값 업데이트 시 업데이트 시간 컬럼 관련 오류 해결
  - 태그 선택 시 발생하는 JavaScript 오류 수정 (e.relatedTarget.closest is not a function)

## [v1.359] - 2025-04-08

### Improved
- 프롬프트 생성시 태그 영역 개선
  - 태그 호버 시 툴바가 안정적으로 표시되도록 UI 구조 개선
  - 태그 색상 변경 시 모든 동일 태그에 즉시 반영되도록 로직 수정
  - 태그 색상 선택 UI가 사용자 조작 없이 사라지지 않도록 개선
  - 선택된 태그와 전체 태그 목록 간 참조 일관성 유지 로직 구현

### Fixed
- 태그 관련 사용성 문제 해결
  - 같은 이름의 태그가 다른 색상으로 표시되는 문제 수정
  - 마우스 호버 이벤트 충돌 문제 해결로 태그 색상 선택 안정화
  - 툴바에서 클릭 이벤트 전파 방지로 프롬프트 생성창 오류 해결
  - 마우스가 태그와 툴바 사이를 이동할 때 호버 상태 유지 기능 추가

## [v1.358] - 2025-04-08

### Fixed
- 사이드바 폴더 중복 문제 해결
  - '모든 프롬프트'와 '즐겨찾기' 폴더가 중복으로 표시되는 문제 수정
  - 특별 폴더와 사용자 폴더 병합 로직 개선으로 중복 방지

### Improved
- 폴더 구조 및 프롬프트 표시 기능 개선
  - 상위 폴더 선택 시 하위 폴더의 프롬프트도 함께 표시되도록 수정
  - 폴더 계층 구조 탐색 알고리즘 강화 (ID 기반 하위 폴더 확인)
  - 폴더 내 프롬프트 개수 표시 방식 개선 (직접 포함된 개수/하위 폴더 포함 전체 개수)

## [v1.357] - 2025-04-07

### Fixed
- 데이터베이스 초기화 문제 해결
  - 코드 롤백 시 데이터베이스 보존을 위한 백업 스크립트 구현
  - 1분 간격 자동 백업으로 데이터 손실 방지
  - 변경 내역만 백업하는 효율적 백업 시스템 구현
  - 데이터베이스 복원 스크립트 추가로 손쉬운 복구 지원

### Added
- 데이터베이스 관리 기능 개선
  - 데이터베이스 자동 백업 스크립트 (auto_backup_db.sh) 추가
  - 데이터베이스 복원 스크립트 (restore_db.sh) 추가
  - 백업 시스템을 위한 데이터 디렉토리 구조 개선

## [v1.356] - 2025-04-07

### Improved
- 검색 기능 실시간 업데이트 개선
  - 사용자 입력에 따른 실시간 검색 결과 업데이트
  - 검색어 입력 시 검색 버튼 클릭 없이 즉시 결과 반영
  - 부분 일치 검색 지원으로 검색 효율성 향상

### Changed
- 검색 범위 최적화
  - 프롬프트 제목, 태그, 폴더 기반 검색으로 범위 확장
  - 검색창에 지원 검색 범위 힌트 추가
  - 프롬프트 내용 검색 제외로 성능 향상 및 관련성 높은 결과 제공

## [v1.355] - 2025-04-07

### Added
- 프롬프트 복제 기능 추가
  - 프롬프트 카드에 복제 버튼 추가
  - 기존 프롬프트를 빠르게 복제하여 유사한 프롬프트 생성 가능
  - 태그, 변수 등 프롬프트의 모든 속성을 함께 복제하는 기능 구현

### Improved
- 프롬프트 관리 사용성 향상
  - 복제 시 원본 프롬프트 제목에 "복사본" 접미사 자동 추가
  - 복제 완료 시 시각적 피드백 제공
  - API 처리 중 로딩 상태 표시로 사용자 경험 개선

## [v1.354] - 2025-04-07

### Added
- 변수 없는 프롬프트 카드에 복사 버튼 추가
  - 모달 열지 않고도 빠르게 프롬프트 내용 복사 가능
  - 변수가 없는 프롬프트에 한해 내용 영역 내 복사 버튼 제공
  - 호버 시 표시되는 UI로 깔끔한 화면 유지

### Improved
- 프롬프트 카드 사용성 향상
  - 호버 시 표시되는 복사 버튼으로 직관적인 UX 제공
  - 복사 작업 완료 시 시각적 피드백 제공
  - 복사 실행 시 사용 기록 자동 업데이트

## [v1.353] - 2025-04-07

### Fixed
- 시간 표기 오류 개선
  - 클라이언트와 서버 간의 시간대(timezone) 불일치 문제 해결
  - UTC 기반 시간 저장 및 비교 로직 구현
  - 시간 형식 변환 과정에서 발생하는 예외 처리 강화
  - 최근 사용 시간이 정확하게 표시되도록 개선

### Improved
- 프롬프트 사용 시간 표시 개선
  - 방금 사용한 프롬프트는 "방금 전"으로 표시
  - 타임존 정보 유무에 따른 조건부 처리 로직 추가
  - 기존 시간 데이터 업데이트를 위한 관리자 API 구현

## [v1.352] - 2025-04-07

### Fixed
- 변수 적용 오류 개선
  - 프롬프트 내 변수 이름과 사용자 정의 변수 이름 간 매핑 시스템 구현
  - 변수 매핑 불일치로 인한 적용 실패 문제 해결
  - 변수 업데이트 시 UI에 즉시 반영되도록 렌더링 로직 최적화

### Improved
- 변수 적용 영역 시각화 기능 추가
  - 프롬프트 내 변수 적용 부분 하이라이트 표시
  - 적용된 변수는 녹색, 미적용 변수는 노란색으로 구분
  - 마우스 오버 시 원본 변수명 표시 기능 추가
  - 변수 적용 상태에 따른 실시간 스타일 업데이트

### Changed
- 디버깅 코드 정리
  - 콘솔 로그 제거로 성능 및 가독성 향상
  - 불필요한 임포트 문 제거
  - 사용하지 않는 컴포넌트 제거

## [v1.351] - 2025-04-07

### Fixed
- 데이터베이스 초기화 오류 개선
  - 데이터베이스 파일 경로를 절대 경로로 변경하여 실행 위치에 관계없이 동일한 DB 파일 참조
  - 중복 초기화 방지 로직 구현으로 서버 재시작 시 데이터 손실 방지
  - 데이터베이스 존재 여부에 따른 조건부 초기화 로직 강화

### Improved
- 데이터베이스 관리 시스템 안정성 향상
  - 기존 데이터베이스 파일 존재 시 기본 데이터 재생성 방지
  - 서버 시작 시 데이터베이스 경로 로깅 추가로 디버깅 용이성 개선
  - 초기화 과정에 대한 명확한 로그 메시지 제공

## [v1.350] - 2025-04-07

### Improved
- 프롬프트 상세 모달 UI 개선
  - 변수 입력 영역을 상단에 고정 배치하여 가시성 향상
  - 변수가 3개 이상일 경우 스크롤 가능한 그리드 레이아웃 적용
  - 원본 프롬프트와 변수 적용된 프롬프트를 나란히 배치
  - 프롬프트 내용 영역에 고정 높이와 스크롤 기능 추가
  - 변수 표시 방식 개선: 각 변수를 2줄로 표시하여 가독성 향상
  - 변수가 적용된 프롬프트에서 {변수명} 부분 시각적 하이라이트 적용

### Changed
- 모달 레이아웃 구조 개선
  - 페이지 흐름을 위에서 아래로 직관적으로 개선
  - 모달 내 컴포넌트 배치 최적화로 사용성 향상
  - 변수 입력과 프롬프트 내용 영역 간 시각적 구분 강화
  - 변수명과 변수값 입력창 레이아웃 개선으로 명확한 구조 제공

## [v1.348] - 2025-04-07

### Added
- 변수 입력창에 텍스트 에디터 기능 추가
  - 긴 텍스트를 위한 확장된 편집 공간 제공
  - 변수 기본값 입력 시 텍스트 에디터 아이콘으로 모달 열기 지원
  - 텍스트 에디터 모달에서 편집 및 저장 기능 구현

### Improved
- 사용자 경험 향상
  - 긴 텍스트 입력 시 가독성 향상
  - 모달 외부 클릭 및 ESC 키로 닫기 기능
  - 직관적인 텍스트 에디터 아이콘 UI

## [v1.347] - 2025-04-07

### Fixed
- 폴더 드래그 앤 드롭 안정성 향상
  - 폴더 위치 이동 시 영역 구분을 명확하게 개선
  - 드롭 위치 결정 로직 안정화 (상단 25%, 하단 25%, 중앙 50%)
  - React 훅 관련 오류 해결

### Improved
- 드래그 앤 드롭 시각적 피드백 강화
  - 드롭 영역별 차별화된 시각적 표시 제공
  - 드롭 마커 두께 및 그림자 효과 개선
  - 애니메이션 부드러움 최적화

### Fixed
- 폴더 마이그레이션 무한 반복 버그 수정
  - 로컬 스토리지 기반 마이그레이션 상태 관리 개선
  - 마이그레이션 필요 여부 확인 API 추가
  - 중복 마이그레이션 방지 메커니즘 구현

## [v1.346] - 2025-04-07

### Added
- 사이드바 폴더 자유 이동 기능 추가
  - 계층 구조를 유지하면서 드래그 앤 드롭으로 폴더 순서 변경 가능
  - 폴더 위치 정보 데이터베이스 지원 추가
  - 시각적 드래그 앤 드롭 피드백 개선
  - 같은 레벨의 폴더 간 자유로운 순서 변경 지원

### Changed
- 폴더 관리 시스템 개선
  - 폴더 위치 정보를 위한 데이터베이스 스키마 확장
  - 폴더 재배치를 위한 API 엔드포인트 추가
  - 기존 계층 구조를 유지하면서 자유로운 정렬 지원
  - 시각적 드래그 앤 드롭 표시기 최적화

## [v1.345] - 2025-04-07

### Fixed
- 서버 재시작 시 데이터 손실 문제 해결
  - 기존 데이터를 유지하면서 데이터베이스 초기화 로직 개선
  - 서버 재시작 후에도 이전에 생성한 프롬프트 및 폴더 정보 유지

### Improved
- 데이터베이스 초기화 로직 리팩토링
  - 테이블 생성 및 기본 데이터 추가 로직 분리
  - 조건부 데이터 생성으로 중복 데이터 방지
  - 코드 가독성 및 유지보수성 향상

### Changed
- 데이터베이스 관련 코드 구조 개선
  - 함수 분리 및 역할 명확화
  - 주석 추가로 코드 이해도 향상
  - 예외 처리 로직 강화

## [v1.344] - 2025-04-07

### Added
- 사이드바에 폴더 생성 기능 구현
  - 폴더 생성 버튼 클릭 시 모달 창 표시
  - 폴더 이름 및 상위 폴더 선택 기능
  - 폴더 생성 API 연동

### Improved
- 폴더 생성 모달 사용성 개선
  - Enter 키로 폴더 생성 가능
  - 모달창 바깥 클릭 시 종료 기능
  - ESC 키 입력 시 종료 기능
  - 모달 열림 시 자동 포커스 기능

## [v1.343] - 2025-04-07

### Fixed
- 폴더 이동 기능 API 호출 오류 수정
  - 폴더 이름이 누락되어 발생하는 400 오류 해결
  - 폴더 이동 시 필수 필드인 name 정보 전송 구현

### Improved
- 폴더 드래그 앤 드롭 성능 최적화
  - 쓰로틀링 기법 적용으로 과도한 이벤트 처리 방지
  - RequestAnimationFrame(RAF) 활용으로 UI 업데이트 최적화
  - 참조(Ref) 사용으로 불필요한 리렌더링 최소화
  - 가상 드래그 요소 캐싱 시스템 구현
  - CSS transition 및 will-change 속성 활용으로 애니메이션 부드럽게 개선

### Changed
- 폴더 구조 탐색 알고리즘 개선
  - 계층 구조에서 효율적으로 폴더를 찾는 findFolderById 함수 추가
  - 드래그 앤 드롭 이벤트 핸들러 최적화
  - React.memo 활용으로 컴포넌트 최적화

## [v1.342] - 2025-04-07

### Added
- 특정 폴더에서 프롬프트 추가 기능 구현
  - 폴더 선택 상태를 저장하여 프롬프트 추가 시 자동 적용
  - handleAddPrompt 함수 개선으로 폴더 ID와 이름 전달 기능 추가

### Changed
- AppContext 상태 관리 개선
  - initialFolderInfo 상태 추가로 프롬프트 생성 시 폴더 정보 유지
  - 컨텍스트 API 확장으로 컴포넌트 간 상태 공유 향상

### Improved
- 사용자 경험 개선
  - 폴더 선택 후 프롬프트 생성 시 불필요한 선택 과정 제거
  - 직관적인 폴더 기반 프롬프트 생성 워크플로우 구현

## [v1.341] - 2025-04-07

### Added
- 커스텀 훅 도입으로 코드 재사용성 향상
  - useContextMenuPosition: 컨텍스트 메뉴 위치 계산 로직 분리
  - useContextMenu: 컨텍스트 메뉴 상태 관리 로직 추출

### Changed
- FolderTree.jsx 코드 리팩토링
  - 디버깅용 로깅 코드 제거
  - 중복 코드 통합 및 이벤트 리스너 코드 간소화
  - 불필요한 주석 정리 및 코드 가독성 개선
  - useCallback 활용으로 성능 최적화
  - 코드 구조 개선 및 관련 기능 그룹화

### Improved
- 코드 길이 약 30% 감소로 유지보수성 향상
- 성능 최적화 및 리소스 사용 효율성 개선

## [v1.34] - 2025-04-07

### Added
- 폴더 컨텍스트 메뉴 개선
  - 사이드바 영역 제한 제거로 메뉴의 자유로운 표시 가능
  - 폴더 요소 위치 기반 메뉴 표시 방식 개선
  - 화면 경계 처리 로직 개선
  - fixed 포지셔닝 적용으로 스크롤 독립성 확보

### Changed
- FolderTree.jsx의 컨텍스트 메뉴 위치 계산 로직 수정
  - 마우스 클릭 위치 대신 폴더 요소 위치 기준으로 변경
  - 화면 경계 처리 로직 단순화
  - 불필요한 사이드바 영역 제한 제거

### Fixed
- 컨텍스트 메뉴가 사이드바 영역을 벗어나지 못하는 문제 해결
- 메뉴가 마우스 클릭 위치와 멀리 표시되는 문제 해결
- 스크롤 시 메뉴 위치가 어긋나는 문제 해결

## [v1.33] - 2025-04-07

### 주요 개선사항

- 사이드바 크기 조절 기능 추가
  - 마우스로 사이드바 너비 조절 가능
  - 설정된 너비 로컬 스토리지에 저장
  - 드래그 시 시각적 피드백 제공
- 테마 설정 기능 추가
  - 라이트/다크 모드 전환 지원
  - 테마 설정 유지 기능

### 코드 변경 사항

- **UI 레이아웃 개선**:
  - `src/components/layout/Sidebar.jsx`: 사이드바 크기 조절 기능 추가
  - `src/pages/Dashboard.jsx`: 사이드바 크기 변경에 맞춰 레이아웃 조정
  
- **테마 관련 기능**:
  - `src/context/AppContext.jsx`: 테마 관련 상태 및 함수 추가
  - `tailwind.config.js`: 다크 모드 설정 추가
  - `src/styles/index.css`: 다크 모드 관련 스타일 추가
  - `src/pages/Settings.jsx`: 테마 전환 UI 구현

## [v1.32] - 2025-04-07

### 주요 개선사항

- 모달 닫기 기능 개선
  - 모달 외부 영역 클릭 시 모달 닫기 기능 추가
  - ESC 키 입력 시 모달 닫기 기능 추가
  - 사용자 경험 개선

### 코드 변경 사항

- **모달 컴포넌트 개선**:
  - `src/modals/PromptDetailModal.jsx`: 외부 클릭 및 ESC 키 감지 기능 추가
  - `src/modals/PromptAddEditModal.jsx`: 외부 클릭 및 ESC 키 감지 기능 추가

## [v1.31] - 2025-04-07

### 주요 개선사항

- CORS 포트 오류 해결
  - Vite 프록시 설정 추가
  - API 호출을 상대 경로로 변경
  - CORS 설정 개선

### 코드 변경 사항

- **Vite 설정**:
  - `vite.config.js`: API 프록시 설정 추가 (/api -> http://localhost:8000)
  
- **Python 백엔드**:
  - `python/api/app.py`: 포트를 5000에서 8000으로, CORS 설정 개선

- **API 호출 방식 변경**:
  - `src/api/config.js`: API_FETCH_OPTIONS 추가
  - `src/api/promptApi.js`: 상대 경로로 API 호출 변경
  - `src/api/folderApi.js`: 상대 경로로 API 호출 변경
  - `src/api/tagApi.js`: 상대 경로로 API 호출 변경
  - `src/api/settingsApi.js`: 상대 경로로 API 호출 변경

## [v1.3] - 2025-04-07

### 주요 개선사항

- 4단계: 프롬프트 추가/편집 모달 개선
  - 변수 자동 추출 및 관리 시스템
  - 태그 선택 및 생성 인터페이스
  - 폴더 구조 탐색 및 선택
  - 데이터 유효성 검사
  - 변수 값을 적용한 프롬프트 미리보기
  - 클립보드 복사 및 사용 기록 추적

### 코드 변경 사항

- **React 프론트엔드**:
  - `src/modals/PromptAddEditModal.jsx`: 프롬프트 추가/편집 모달 개선
  - `src/modals/PromptDetailModal.jsx`: 프롬프트 상세 모달 개선
  - `src/components/variables/`: 변수 관리 컴포넌트 추가
    - `VariableList.jsx`: 변수 목록 및 편집 컴포넌트
    - `VariableHighlighter.jsx`: 변수 하이라이팅 컴포넌트
  - `src/components/tags/TagSelector.jsx`: 태그 선택 및 생성 컴포넌트
  - `src/components/folders/FolderSelector.jsx`: 폴더 선택 및 생성 컴포넌트
  - `src/utils/variableParser.js`: 변수 추출 및 적용 유틸리티
  - `src/utils/clipboard.js`: 클립보드 관련 유틸리티

## [v1.2] - 2025-04-07

### 주요 개선사항

- 2단계: 데이터베이스 구현 및 기본 CRUD 기능
  - SQLite 데이터베이스 설정 완료
  - 프롬프트 추가, 조회, 수정, 삭제 기능 구현
  - API 엔드포인트 구성
- 3단계: 메인 대시보드 기능 구현
  - 프롬프트 목록 및 그리드 뷰 구현
  - 폴더 트리 네비게이션 추가
  - 검색 및 필터링 컴포넌트 개발
  - 사이드바 및 헤더 레이아웃 개선

### 코드 변경 사항

- **Python 백엔드**:
  - `python/db/database.py`: SQLite 데이터베이스 스키마 및 연결 기능 구현
  - `python/api/app.py`: Flask API 서버 및 CORS 설정
  - 데이터베이스 CRUD 작업을 위한 엔드포인트 추가

- **React 프론트엔드**:
  - `src/components/prompts/*`: 프롬프트 카드, 목록, 그리드 컴포넌트 개선
  - `src/components/layout/*`: 헤더 및 사이드바 레이아웃 구현
  - `src/components/folders/FolderTree.jsx`: 폴더 트리 네비게이션 기능 추가
  - `src/context/AppContext.jsx`: 애플리케이션 상태 관리 기능 구현
  - `src/pages/Dashboard.jsx`: 메인 대시보드 페이지 개발
  - `src/api/`: API 통신을 위한 유틸리티 함수 추가
  - `src/hooks/`: 커스텀 React 훅 구현
  - `src/utils/`: 유틸리티 헬퍼 함수 추가
  - `src/components/filters/`: 필터링 컴포넌트 구현
  - `src/components/search/`: 검색 기능 구현

## [v1.0] - 2025-04-07

### 주요 기능

- 1단계: 프로젝트 초기 설정 및 기본 구조 구현
  - React + Vite 환경 설정 및 프로젝트 생성
  - Tailwind CSS 설정 및 기본 스타일 적용
  - 폴더 구조 설정 및 핵심 컴포넌트 구현
  - 상태 관리를 위한 Context API 구현
  - 기본 UI 레이아웃 (사이드바, 헤더, 대시보드) 구현
  - 기본 데이터베이스 스키마 설계

### 코드 변경 사항

- **프로젝트 설정**:
  - `package.json`: 프로젝트 의존성 및 스크립트 구성
  - `vite.config.js`: Vite 빌드 도구 설정
  - `tailwind.config.js`: Tailwind CSS 구성
  - `src/styles/index.css`: 기본 스타일 및 컴포넌트 스타일 정의

- **핵심 컴포넌트**:
  - `src/App.jsx`: 메인 앱 컴포넌트 구현
  - `src/main.jsx`: 진입점 설정 및 앱 렌더링
  - `src/context/AppContext.jsx`: 애플리케이션 상태 관리
  - `src/pages/*`: 메인 페이지 컴포넌트
  - `src/components/*`: 레이아웃, 프롬프트, 폴더, 태그 컴포넌트
  - `src/modals/*`: 모달 컴포넌트 (프롬프트 추가/편집, 상세보기)

- **Python 백엔드**:
  - `python/main.py`: 메인 애플리케이션 진입점
  - `python/db/database.py`: 기본 데이터베이스 구조 설정


